<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MOM6: mom_io Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MOM6
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacemom__io.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">mom_io Module Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module contains I/O framework code. </p>
<p>This file contains a number of subroutines that manipulate NetCDF files and handle input and output of fields. These subroutines, along with their purpose, are:</p>
<ul>
<li>create_file: create a new file and set up structures that are needed for subsequent output and write out the coordinates.</li>
<li>reopen_file: reopen an existing file for writing and set up structures that are needed for subsequent output.</li>
<li>open_input_file: open the indicated file for reading only.</li>
<li>close_file: close an open file.</li>
<li>synch_file: flush the buffers, completing all pending output.</li>
<li>write_field: write a field to an open file.</li>
<li>write_time: write a value of the time axis to an open file.</li>
<li>read_field: read a field from an open file.</li>
<li>read_time: read a time from an open file.</li>
<li>name_output_file: provide a name for an output file based on a name root and the time of the output.</li>
<li>find_input_file: find a file that has been previously written by MOM and named by name_output_file and open it for reading.</li>
<li>handle_error: write an error code and quit. </li>
</ul>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacemom__io_1_1file__exists.html">file_exists</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacemom__io_1_1mom__read__data.html">mom_read_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmom__io_1_1vardesc.html">vardesc</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for describing a variable, typically a tracer.  <a href="structmom__io_1_1vardesc.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:af1055066586190a2ce5c225c85261ee3"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#af1055066586190a2ce5c225c85261ee3">create_file</a> (unit, filename, vars, novars, fields, threading, timeunit, G, dG, GV)</td></tr>
<tr class="memdesc:af1055066586190a2ce5c225c85261ee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Routine creates a new NetCDF file. It also sets up structures that describe this file and variables that will later be written to this file. Type for describing a variable, typically a tracer.  <a href="#af1055066586190a2ce5c225c85261ee3">More...</a><br /></td></tr>
<tr class="separator:af1055066586190a2ce5c225c85261ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac15e7cf282a5b17192ffb7561537cb8c"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#ac15e7cf282a5b17192ffb7561537cb8c">reopen_file</a> (unit, filename, vars, novars, fields, threading, timeunit, G, dG, GV)</td></tr>
<tr class="memdesc:ac15e7cf282a5b17192ffb7561537cb8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine opens an existing NetCDF file for output. If it does not find the file, a new file is created. It also sets up structures that describe this file and the variables that will later be written to this file.  <a href="#ac15e7cf282a5b17192ffb7561537cb8c">More...</a><br /></td></tr>
<tr class="separator:ac15e7cf282a5b17192ffb7561537cb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cbd4826c272e6b7a35ad95894a977c3"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a9cbd4826c272e6b7a35ad95894a977c3">read_axis_data</a> (filename, axis_name, var)</td></tr>
<tr class="separator:a9cbd4826c272e6b7a35ad95894a977c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79952045e028c6882f5b04ea5a1a83f7"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a79952045e028c6882f5b04ea5a1a83f7">num_timelevels</a> (filename, varname, min_dims)</td></tr>
<tr class="memdesc:a79952045e028c6882f5b04ea5a1a83f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function determines how many time levels a variable has.  <a href="#a79952045e028c6882f5b04ea5a1a83f7">More...</a><br /></td></tr>
<tr class="separator:a79952045e028c6882f5b04ea5a1a83f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c3ccc06bb1a6e446af2ee9010eba16"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a39c3ccc06bb1a6e446af2ee9010eba16">var_desc</a> (name, units, longname, hor_grid, z_grid, t_grid, cmor_field_name, cmor_units, conversion, caller)</td></tr>
<tr class="memdesc:a39c3ccc06bb1a6e446af2ee9010eba16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a vardesc type whose elements have been filled with the provided fields. The argument name is required, while the others are optional and have default values that are empty strings or are appropriate for a 3-d tracer field at the tracer cell centers.  <a href="#a39c3ccc06bb1a6e446af2ee9010eba16">More...</a><br /></td></tr>
<tr class="separator:a39c3ccc06bb1a6e446af2ee9010eba16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af96b29cb8410d557e8e452b81586223b"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#af96b29cb8410d557e8e452b81586223b">modify_vardesc</a> (vd, name, units, longname, hor_grid, z_grid, t_grid, cmor_field_name, cmor_units, conversion, caller)</td></tr>
<tr class="memdesc:af96b29cb8410d557e8e452b81586223b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine modifies the named elements of a vardesc type. All arguments are optional, except the vardesc type to be modified.  <a href="#af96b29cb8410d557e8e452b81586223b">More...</a><br /></td></tr>
<tr class="separator:af96b29cb8410d557e8e452b81586223b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23e82d1d89d9bb1c9bdf802ce80d4508"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a23e82d1d89d9bb1c9bdf802ce80d4508">query_vardesc</a> (vd, name, units, longname, hor_grid, z_grid, t_grid, cmor_field_name, cmor_units, conversion, caller)</td></tr>
<tr class="memdesc:a23e82d1d89d9bb1c9bdf802ce80d4508"><td class="mdescLeft">&#160;</td><td class="mdescRight">This routine queries vardesc.  <a href="#a23e82d1d89d9bb1c9bdf802ce80d4508">More...</a><br /></td></tr>
<tr class="separator:a23e82d1d89d9bb1c9bdf802ce80d4508"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bc408e8b38dbd669842753f26ebf88"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#ac4bc408e8b38dbd669842753f26ebf88">safe_string_copy</a> (str1, str2, fieldnm, caller)</td></tr>
<tr class="memdesc:ac4bc408e8b38dbd669842753f26ebf88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies a string.  <a href="#ac4bc408e8b38dbd669842753f26ebf88">More...</a><br /></td></tr>
<tr class="separator:ac4bc408e8b38dbd669842753f26ebf88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fe77ff735a4a6177da5395fb4bc2949"><td class="memItemLeft" align="right" valign="top"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=len(name)) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a0fe77ff735a4a6177da5395fb4bc2949">ensembler</a> (name, ens_no_in)</td></tr>
<tr class="memdesc:a0fe77ff735a4a6177da5395fb4bc2949"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a name with "%#E" or "%E" replaced with the ensemble member number.  <a href="#a0fe77ff735a4a6177da5395fb4bc2949">More...</a><br /></td></tr>
<tr class="separator:a0fe77ff735a4a6177da5395fb4bc2949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbd53a6e8c4ff980d48a87cd0f795a5f"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#acbd53a6e8c4ff980d48a87cd0f795a5f">mom_file_exists</a> (file_name, MOM_Domain)</td></tr>
<tr class="memdesc:acbd53a6e8c4ff980d48a87cd0f795a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the named file or its domain-decomposed variant exists.  <a href="#acbd53a6e8c4ff980d48a87cd0f795a5f">More...</a><br /></td></tr>
<tr class="separator:acbd53a6e8c4ff980d48a87cd0f795a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fd87e3cf57a88e9c459679d4154af9b"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a9fd87e3cf57a88e9c459679d4154af9b">mom_read_data_1d</a> (filename, fieldname, data)</td></tr>
<tr class="memdesc:a9fd87e3cf57a88e9c459679d4154af9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function uses the fms_io function read_data to read 1-D data field named "fieldname" from file "filename".  <a href="#a9fd87e3cf57a88e9c459679d4154af9b">More...</a><br /></td></tr>
<tr class="separator:a9fd87e3cf57a88e9c459679d4154af9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234ef0223f22bcc240e83bb89ba5c346"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a234ef0223f22bcc240e83bb89ba5c346">mom_read_data_2d</a> (filename, fieldname, data, MOM_Domain, timelevel, position)</td></tr>
<tr class="memdesc:a234ef0223f22bcc240e83bb89ba5c346"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function uses the fms_io function read_data to read a distributed 2-D data field named "fieldname" from file "filename". Valid values for "position" include CORNER, CENTER, EAST_FACE and NORTH_FACE.  <a href="#a234ef0223f22bcc240e83bb89ba5c346">More...</a><br /></td></tr>
<tr class="separator:a234ef0223f22bcc240e83bb89ba5c346"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9488a6f3b4b48b10211399b313678f49"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a9488a6f3b4b48b10211399b313678f49">mom_read_data_3d</a> (filename, fieldname, data, MOM_Domain, timelevel, position)</td></tr>
<tr class="memdesc:a9488a6f3b4b48b10211399b313678f49"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function uses the fms_io function read_data to read a distributed 2-D data field named "fieldname" from file "filename". Valid values for "position" include CORNER, CENTER, EAST_FACE and NORTH_FACE.  <a href="#a9488a6f3b4b48b10211399b313678f49">More...</a><br /></td></tr>
<tr class="separator:a9488a6f3b4b48b10211399b313678f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80a3125a7c246310b5580f4b90ced8a0"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemom__io.html#a80a3125a7c246310b5580f4b90ced8a0">mom_io_init</a> (param_file)</td></tr>
<tr class="memdesc:a80a3125a7c246310b5580f4b90ced8a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the MOM_io module.  <a href="#a80a3125a7c246310b5580f4b90ced8a0">More...</a><br /></td></tr>
<tr class="separator:a80a3125a7c246310b5580f4b90ced8a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="af1055066586190a2ce5c225c85261ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1055066586190a2ce5c225c85261ee3">&#9670;&nbsp;</a></span>create_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::create_file </td>
          <td>(</td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>unit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>novars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(fieldtype), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>threading</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>timeunit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(ocean_grid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(dyn_horgrid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>dG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(verticalgrid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>GV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Routine creates a new NetCDF file. It also sets up structures that describe this file and variables that will later be written to this file. Type for describing a variable, typically a tracer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">unit</td><td>unit id of an open file or -1 on a nonwriting PE with single file output</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>full path to the file to create</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vars</td><td>structures describing fields written to filename</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">novars</td><td>number of fields written to filename</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fields</td><td>array of fieldtypes for each variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">threading</td><td>SINGLE_FILE or MULTIPLE</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeunit</td><td>length, in seconds, of the units for time. The default value is 86400.0, for 1 day.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">g</td><td>ocean horizontal grid structure; G or dG is required if the new file uses any horizontal grid axes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dg</td><td>dynamic horizontal grid structure; G or dG is required if the new file uses any horizontal grid axes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gv</td><td>ocean vertical grid structure, which is required if the new file uses any vertical grid axes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00082">82</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MOM__ALE_8F90_source.html#l01276">mom_ale::ale_writecoordinatefile()</a>, and <a class="el" href="MOM__io_8F90_source.html#l00337">reopen_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordtype">integer</span>,               <span class="keywordtype">intent(out)</span>   :: unit<span class="comment">       !&lt; unit id of an open file or -1 on a</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">                                                     !! nonwriting PE with single file output</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keywordtype">character(len=*)</span>,      <span class="keywordtype">intent(in)</span>    :: filename<span class="comment">   !&lt; full path to the file to create</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">type</span>(vardesc),         <span class="keywordtype">intent(in)</span>    :: vars(:)<span class="comment">    !&lt; structures describing fields written to filename</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordtype">integer</span>,               <span class="keywordtype">intent(in)</span>    :: novars<span class="comment">     !&lt; number of fields written to filename</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordtype">type</span>(fieldtype),       <span class="keywordtype">intent(inout)</span> :: fields(:)<span class="comment">  !&lt; array of fieldtypes for each variable</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>,     <span class="keywordtype">intent(in)</span>    :: threading<span class="comment">  !&lt; SINGLE_FILE or MULTIPLE</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">optional</span>,        <span class="keywordtype">intent(in)</span>    :: timeunit<span class="comment">   !&lt; length, in seconds, of the units for time. The</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">                                                     !! default value is 86400.0, for 1 day.</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordtype">type</span>(<a class="code" href="structmom__grid_1_1ocean__grid__type.html">ocean_grid_type</a>),   <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: g<span class="comment"> !&lt; ocean horizontal grid structure; G or dG</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">                                                     !! is required if the new file uses any</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">                                                     !! horizontal grid axes.</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordtype">type</span>(dyn_horgrid_type),  <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: dg<span class="comment"> !&lt; dynamic horizontal grid structure; G or dG</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">                                                     !! is required if the new file uses any</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">                                                     !! horizontal grid axes.</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordtype">type</span>(verticalgrid_type), <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: gv<span class="comment"> !&lt; ocean vertical grid structure, which is</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">                                                     !! required if the new file uses any</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">                                                     !! vertical grid axes.</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordtype">logical</span>        :: use_lath, use_lonh, use_latq, use_lonq, use_time</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordtype">logical</span>        :: use_layer, use_int, use_periodic</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="keywordtype">logical</span>        :: one_file, domain_set</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordtype">type</span>(axistype) :: axis_lath, axis_latq, axis_lonh, axis_lonq</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordtype">type</span>(axistype) :: axis_layer, axis_int, axis_time, axis_periodic</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="keywordtype">type</span>(axistype) :: axes(4)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="keywordtype">type</span>(mom_domain_type), <span class="keywordtype">pointer</span> :: domain =&gt; null()</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordtype">type</span>(domain1d) :: x_domain, y_domain</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordtype">integer</span>        :: numaxes, pack, thread, k</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordtype">integer</span>        :: isg, ieg, jsg, jeg, isgb, iegb, jsgb, jegb</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="keywordtype">integer</span>        :: var_periods, num_periods=0</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: period_val</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">pointer</span>, <span class="keywordtype">dimension(:)</span> :: &amp;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    gridlatt =&gt; null(), &amp; <span class="comment">! The latitude or longitude of T or B points for</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    gridlatb =&gt; null(), &amp; <span class="comment">! the purpose of labeling the output axes.</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    gridlont =&gt; null(), gridlonb =&gt; null()</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="keywordtype">character(len=40)</span> :: time_units, x_axis_units, y_axis_units</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordtype">character(len=8)</span>  :: t_grid, t_grid_read</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  use_lath  = .false. ; use_lonh     = .false.</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  use_latq  = .false. ; use_lonq     = .false.</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  use_time  = .false. ; use_periodic = .false.</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  use_layer = .false. ; use_int      = .false.</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  thread = single_file</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">PRESENT</span>(threading)) thread = threading</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  domain_set = .false.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(g)) <span class="keywordflow">then</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    domain_set = .true. ; domain =&gt; g%Domain</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    gridlatt =&gt; g%gridLatT ; gridlatb =&gt; g%gridLatB</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    gridlont =&gt; g%gridLonT ; gridlonb =&gt; g%gridLonB</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    x_axis_units = g%x_axis_units ; y_axis_units = g%y_axis_units</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    isg = g%isg ; ieg = g%ieg ; jsg = g%jsg ; jeg = g%jeg</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    isgb = g%IsgB ; iegb = g%IegB ; jsgb = g%JsgB ; jegb = g%JegB</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">elseif</span> (<span class="keyword">present</span>(dg)) <span class="keywordflow">then</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    domain_set = .true. ; domain =&gt; dg%Domain</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    gridlatt =&gt; dg%gridLatT ; gridlatb =&gt; dg%gridLatB</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    gridlont =&gt; dg%gridLonT ; gridlonb =&gt; dg%gridLonB</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    x_axis_units = dg%x_axis_units ; y_axis_units = dg%y_axis_units</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    isg = dg%isg ; ieg = dg%ieg ; jsg = dg%jsg ; jeg = dg%jeg</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    isgb = dg%IsgB ; iegb = dg%IegB ; jsgb = dg%JsgB ; jegb = dg%JegB</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  one_file = .true.</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="keywordflow">if</span> (domain_set) <span class="keywordflow">then</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    one_file = ((thread == single_file) .or. .not.domain%use_io_layout)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <span class="keywordflow">if</span> (one_file) <span class="keywordflow">then</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">call </span>open_file(unit, filename, mpp_overwr, mpp_netcdf, threading=thread)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">call </span>open_file(unit, filename, mpp_overwr, mpp_netcdf, domain=domain%mpp_domain)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">! Define the coordinates.</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">do</span> k=1,novars</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">select case</span> (vars(k)%hor_grid)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;h&#39;</span>) ; use_lath = .true. ; use_lonh = .true.</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;q&#39;</span>) ; use_latq = .true. ; use_lonq = .true.</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;u&#39;</span>) ; use_lath = .true. ; use_lonq = .true.</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;v&#39;</span>) ; use_latq = .true. ; use_lonh = .true.</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;T&#39;</span>)  ; use_lath = .true. ; use_lonh = .true.</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Bu&#39;</span>) ; use_latq = .true. ; use_lonq = .true.</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Cu&#39;</span>) ; use_lath = .true. ; use_lonq = .true.</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Cv&#39;</span>) ; use_latq = .true. ; use_lonh = .true.</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">call </span>mom_error(warning, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                        <span class="stringliteral">&quot; has unrecognized hor_grid &quot;</span>//trim(vars(k)%hor_grid))</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">select case</span> (vars(k)%z_grid)</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;L&#39;</span>) ; use_layer = .true.</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;i&#39;</span>) ; use_int = .true.</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        <span class="stringliteral">&quot; has unrecognized z_grid &quot;</span>//trim(vars(k)%z_grid))</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    t_grid = adjustl(vars(k)%t_grid)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">select case</span> (t_grid(1:1))</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;s&#39;</span>, <span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;m&#39;</span>) ; use_time = .true.</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;p&#39;</span>) ; use_periodic = .true.</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">if</span> (len_trim(t_grid(2:8)) &lt;= 0) <span class="keyword">call </span>mom_error(fatal, &amp;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;          <span class="stringliteral">&quot;MOM_io create_file: No periodic axis length was specified in &quot;</span>//&amp;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;          trim(vars(k)%t_grid) // <span class="stringliteral">&quot; in the periodic axes of variable &quot;</span>//&amp;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;          trim(vars(k)%name)//<span class="stringliteral">&quot; in file &quot;</span>//trim(filename))</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        var_periods = -9999999</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        t_grid_read = adjustl(t_grid(2:8))</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keyword">read</span>(t_grid_read,*) var_periods</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keywordflow">if</span> (var_periods == -9999999) <span class="keyword">call </span>mom_error(fatal, &amp;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;          <span class="stringliteral">&quot;MOM_io create_file: Failed to read the number of periods from &quot;</span>//&amp;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;          trim(vars(k)%t_grid) // <span class="stringliteral">&quot; in the periodic axes of variable &quot;</span>//&amp;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;          trim(vars(k)%name)//<span class="stringliteral">&quot; in file &quot;</span>//trim(filename))</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (var_periods &lt; 1) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//&amp;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;           <span class="stringliteral">&quot;variable &quot;</span>//trim(vars(k)%name)//<span class="stringliteral">&quot; in file &quot;</span>//trim(filename)//&amp;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;           <span class="stringliteral">&quot; uses a periodic time axis, and must have a positive &quot;</span>//&amp;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;           <span class="stringliteral">&quot;value for the number of periods in &quot;</span>//vars(k)%t_grid )</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">if</span> ((num_periods &gt; 0) .and. (var_periods /= num_periods)) &amp;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;          <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//&amp;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="stringliteral">&quot;Only one value of the number of periods can be used in the &quot;</span>//&amp;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="stringliteral">&quot;create_file call for file &quot;</span>//trim(filename)//<span class="stringliteral">&quot;.  The second is &quot;</span>//&amp;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="stringliteral">&quot;variable &quot;</span>//trim(vars(k)%name)//<span class="stringliteral">&quot; with t_grid &quot;</span>//vars(k)%t_grid )</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        num_periods = var_periods</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keyword">call </span>mom_error(warning, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        <span class="stringliteral">&quot; has unrecognized t_grid &quot;</span>//trim(vars(k)%t_grid))</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordflow">  end do</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <span class="keywordflow">if</span> ((use_lath .or. use_lonh .or. use_latq .or. use_lonq)) <span class="keywordflow">then</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (.not.domain_set) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;create_file: &quot;</span>//&amp;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="stringliteral">&quot;An ocean_grid_type or dyn_horgrid_type is required to create a file with a horizontal coordinate.&quot;</span>)</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keyword">call </span>mpp_get_domain_components(domain%mpp_domain, x_domain, y_domain)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  <span class="keywordflow">if</span> ((use_layer .or. use_int) .and. .not.<span class="keyword">present</span>(gv)) <span class="keyword">call </span>mom_error(fatal, &amp;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="stringliteral">&quot;create_file: A vertical grid type is required to create a file with a vertical coordinate.&quot;</span>)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">! Specify all optional arguments to mpp_write_meta: name, units, longname, cartesian, calendar, sense, domain, data, min)</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">! Otherwise if optional arguments are added to mpp_write_meta the compiler may (and in case of GNU is) get confused and crash.</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">if</span> (use_lath) &amp;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_lath, name=<span class="stringliteral">&quot;lath&quot;</span>, units=y_axis_units, longname=<span class="stringliteral">&quot;Latitude&quot;</span>, &amp;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                   cartesian=<span class="stringliteral">&#39;Y&#39;</span>, domain = y_domain, data=gridlatt(jsg:jeg))</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="keywordflow">if</span> (use_lonh) &amp;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_lonh, name=<span class="stringliteral">&quot;lonh&quot;</span>, units=x_axis_units, longname=<span class="stringliteral">&quot;Longitude&quot;</span>, &amp;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                   cartesian=<span class="stringliteral">&#39;X&#39;</span>, domain = x_domain, data=gridlont(isg:ieg))</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">if</span> (use_latq) &amp;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_latq, name=<span class="stringliteral">&quot;latq&quot;</span>, units=y_axis_units, longname=<span class="stringliteral">&quot;Latitude&quot;</span>, &amp;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                   cartesian=<span class="stringliteral">&#39;Y&#39;</span>, domain = y_domain, data=gridlatb(jsgb:jegb))</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">if</span> (use_lonq) &amp;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_lonq, name=<span class="stringliteral">&quot;lonq&quot;</span>, units=x_axis_units, longname=<span class="stringliteral">&quot;Longitude&quot;</span>, &amp;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                   cartesian=<span class="stringliteral">&#39;X&#39;</span>, domain = x_domain, data=gridlonb(isgb:iegb))</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="keywordflow">if</span> (use_layer) &amp;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_layer, name=<span class="stringliteral">&quot;Layer&quot;</span>, units=trim(gv%zAxisUnits), &amp;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;          longname=<span class="stringliteral">&quot;Layer &quot;</span>//trim(gv%zAxisLongName), cartesian=<span class="stringliteral">&#39;Z&#39;</span>, &amp;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;          sense=1, data=gv%sLayer(1:gv%ke))</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <span class="keywordflow">if</span> (use_int) &amp;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_int, name=<span class="stringliteral">&quot;Interface&quot;</span>, units=trim(gv%zAxisUnits), &amp;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          longname=<span class="stringliteral">&quot;Interface &quot;</span>//trim(gv%zAxisLongName), cartesian=<span class="stringliteral">&#39;Z&#39;</span>, &amp;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          sense=1, data=gv%sInterface(1:gv%ke+1))</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="keywordflow">if</span> (use_time) <span class="keywordflow">then</span> ; <span class="keywordflow">if</span> (<span class="keyword">present</span>(timeunit)) <span class="keywordflow">then</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">! Set appropriate units, depending on the value.</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (timeunit &lt; 0.0) <span class="keywordflow">then</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      time_units = <span class="stringliteral">&quot;days&quot;</span> <span class="comment">! The default value.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((timeunit &gt;= 0.99) .and. (timeunit &lt; 1.01)) <span class="keywordflow">then</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      time_units = <span class="stringliteral">&quot;seconds&quot;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((timeunit &gt;= 3599.0) .and. (timeunit &lt; 3601.0)) <span class="keywordflow">then</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      time_units = <span class="stringliteral">&quot;hours&quot;</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((timeunit &gt;= 86399.0) .and. (timeunit &lt; 86401.0)) <span class="keywordflow">then</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      time_units = <span class="stringliteral">&quot;days&quot;</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((timeunit &gt;= 3.0e7) .and. (timeunit &lt; 3.2e7)) <span class="keywordflow">then</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      time_units = <span class="stringliteral">&quot;years&quot;</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keyword">write</span>(time_units,<span class="stringliteral">&#39;(es8.2,&quot; s&quot;)&#39;</span>) timeunit</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_time, name=<span class="stringliteral">&quot;Time&quot;</span>, units=time_units, longname=<span class="stringliteral">&quot;Time&quot;</span>, cartesian=<span class="stringliteral">&#39;T&#39;</span>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_time, name=<span class="stringliteral">&quot;Time&quot;</span>, units=<span class="stringliteral">&quot;days&quot;</span>, longname=<span class="stringliteral">&quot;Time&quot;</span>,cartesian= <span class="stringliteral">&#39;T&#39;</span>)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="keywordflow">  endif</span> ;<span class="keywordflow"> endif</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  <span class="keywordflow">if</span> (use_periodic) <span class="keywordflow">then</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (num_periods &lt;= 1) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//&amp;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="stringliteral">&quot;num_periods for file &quot;</span>//trim(filename)//<span class="stringliteral">&quot; must be at least 1.&quot;</span>)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">! Define a periodic axis with unit labels.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keyword">allocate</span>(period_val(num_periods))</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">do</span> k=1,num_periods ; period_val(k) = <span class="keywordtype">real(k)</span> ; enddo</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, axis_periodic, name=<span class="stringliteral">&quot;Period&quot;</span>, units=<span class="stringliteral">&quot;nondimensional&quot;</span>, &amp;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;          longname=<span class="stringliteral">&quot;Periods for cyclical varaiables&quot;</span>, cartesian= <span class="stringliteral">&#39;t&#39;</span>, data=period_val)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">deallocate</span>(period_val)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <span class="keywordflow">do</span> k=1,novars</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    numaxes = 0</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">select case</span> (vars(k)%hor_grid)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;h&#39;</span>)  ; numaxes = 2 ; axes(1) = axis_lonh ; axes(2) = axis_lath</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;q&#39;</span>)  ; numaxes = 2 ; axes(1) = axis_lonq ; axes(2) = axis_latq</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;u&#39;</span>)  ; numaxes = 2 ; axes(1) = axis_lonq ; axes(2) = axis_lath</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;v&#39;</span>)  ; numaxes = 2 ; axes(1) = axis_lonh ; axes(2) = axis_latq</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;T&#39;</span>)  ; numaxes = 2 ; axes(1) = axis_lonh ; axes(2) = axis_lath</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Bu&#39;</span>) ; numaxes = 2 ; axes(1) = axis_lonq ; axes(2) = axis_latq</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Cu&#39;</span>) ; numaxes = 2 ; axes(1) = axis_lonq ; axes(2) = axis_lath</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;Cv&#39;</span>) ; numaxes = 2 ; axes(1) = axis_lonh ; axes(2) = axis_latq</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">call </span>mom_error(warning, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                        <span class="stringliteral">&quot; has unrecognized hor_grid &quot;</span>//trim(vars(k)%hor_grid))</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">select case</span> (vars(k)%z_grid)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;L&#39;</span>) ; numaxes = numaxes+1 ; axes(numaxes) = axis_layer</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;i&#39;</span>) ; numaxes = numaxes+1 ; axes(numaxes) = axis_int</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                        <span class="stringliteral">&quot; has unrecognized z_grid &quot;</span>//trim(vars(k)%z_grid))</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    t_grid = adjustl(vars(k)%t_grid)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">select case</span> (t_grid(1:1))</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;s&#39;</span>, <span class="stringliteral">&#39;a&#39;</span>, <span class="stringliteral">&#39;m&#39;</span>) ; numaxes = numaxes+1 ; axes(numaxes) = axis_time</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;p&#39;</span>)           ; numaxes = numaxes+1 ; axes(numaxes) = axis_periodic</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">case</span> (<span class="stringliteral">&#39;1&#39;</span>) <span class="comment">! Do nothing.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keywordflow">      case default</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <span class="keyword">call </span>mom_error(warning, <span class="stringliteral">&quot;MOM_io create_file: &quot;</span>//trim(vars(k)%name)//&amp;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                        <span class="stringliteral">&quot; has unrecognized t_grid &quot;</span>//trim(vars(k)%t_grid))</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="keywordflow">    end select</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    pack = 1</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keyword">call </span>mpp_write_meta(unit, fields(k), axes(1:numaxes), vars(k)%name, vars(k)%units, &amp;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;           vars(k)%longname, pack = pack)</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keywordflow">  enddo</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (use_lath) <span class="keyword">call </span>write_field(unit, axis_lath)</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (use_latq) <span class="keyword">call </span>write_field(unit, axis_latq)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (use_lonh) <span class="keyword">call </span>write_field(unit, axis_lonh)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (use_lonq) <span class="keyword">call </span>write_field(unit, axis_lonq)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">if</span> (use_layer) <span class="keyword">call </span>write_field(unit, axis_layer)</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  <span class="keywordflow">if</span> (use_int) <span class="keyword">call </span>write_field(unit, axis_int)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;  <span class="keywordflow">if</span> (use_periodic) <span class="keyword">call </span>write_field(unit, axis_periodic)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="ttc" id="structmom__grid_1_1ocean__grid__type_html"><div class="ttname"><a href="structmom__grid_1_1ocean__grid__type.html">mom_grid::ocean_grid_type</a></div><div class="ttdoc">Ocean grid type. See mom_grid for details. </div><div class="ttdef"><b>Definition:</b> <a href="MOM__grid_8F90_source.html#l00019">MOM_grid.F90:19</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_af1055066586190a2ce5c225c85261ee3_cgraph.svg" width="526" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_af1055066586190a2ce5c225c85261ee3_icgraph.svg" width="407" height="88"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a0fe77ff735a4a6177da5395fb4bc2949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fe77ff735a4a6177da5395fb4bc2949">&#9670;&nbsp;</a></span>ensembler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=len(name)) function, public mom_io::ensembler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>ens_no_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a name with "%#E" or "%E" replaced with the ensemble member number. </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00724">724</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordtype">character(len=*)</span>,  <span class="keywordtype">intent(in)</span> :: name</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: ens_no_in</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <span class="keywordtype">character(len=len(name))</span> :: en_nm</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="comment">! This function replaces &quot;%#E&quot; or &quot;%E&quot; with the ensemble number anywhere it</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;  <span class="comment">! occurs in name, with %E using 4 or 6 digits (depending on the ensemble size)</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <span class="comment">! and %#E using # digits, where # is a number from 1 to 9.</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordtype">character(len=len(name))</span> :: tmp</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="keywordtype">character(10)</span> :: ens_num_char</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordtype">character(3)</span>  :: code_str</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordtype">integer</span> :: ens_no</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  <span class="keywordtype">integer</span> :: n, is, ie</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  en_nm = trim(name)</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  <span class="keywordflow">if</span> (index(name,<span class="stringliteral">&quot;%&quot;</span>) == 0) <span class="keywordflow">return</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(ens_no_in)) <span class="keywordflow">then</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    ens_no = ens_no_in</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    ens_no = get_ensemble_id()</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  <span class="keyword">write</span>(ens_num_char, <span class="stringliteral">&#39;(I10)&#39;</span>) ens_no ; ens_num_char = adjustl(ens_num_char)</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  <span class="keywordflow">do</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    is = index(en_nm,<span class="stringliteral">&quot;%E&quot;</span>)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (is == 0) <span class="keywordflow">exit</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">if</span> (len(en_nm) &lt; len(trim(en_nm)) + len(trim(ens_num_char)) - 2) &amp;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io ensembler: name &quot;</span>//trim(name)// &amp;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="stringliteral">&quot; is not long enough for %E expansion for ens_no &quot;</span>//trim(ens_num_char))</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    tmp = en_nm(1:is-1)//trim(ens_num_char)//trim(en_nm(is+2:))</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    en_nm = tmp</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="keywordflow">  enddo</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;  <span class="keywordflow">if</span> (index(name,<span class="stringliteral">&quot;%&quot;</span>) == 0) <span class="keywordflow">return</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keyword">write</span>(ens_num_char, <span class="stringliteral">&#39;(I10.10)&#39;</span>) ens_no</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  <span class="keywordflow">do</span> n=1,9 ; <span class="keywordflow">do</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">write</span>(code_str, <span class="stringliteral">&#39;(&quot;%&quot;,I1,&quot;E&quot;)&#39;</span>) n</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    is = index(en_nm,code_str)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">if</span> (is == 0) <span class="keywordflow">exit</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (ens_no &lt; 10**n) <span class="keywordflow">then</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="keywordflow">if</span> (len(en_nm) &lt; len(trim(en_nm)) + n-3) <span class="keyword">call </span>mom_error(fatal, &amp;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <span class="stringliteral">&quot;MOM_io ensembler: name &quot;</span>//trim(name)//<span class="stringliteral">&quot; is not long enough for %E expansion.&quot;</span>)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      tmp = en_nm(1:is-1)//trim(ens_num_char(11-n:10))//trim(en_nm(is+3:))</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io ensembler: Ensemble number is too large &quot;</span>//&amp;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;          <span class="stringliteral">&quot;to be encoded with &quot;</span>//code_str//<span class="stringliteral">&quot; in &quot;</span>//trim(name))</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    en_nm = tmp</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="keywordflow">  enddo</span> ;<span class="keywordflow"> enddo</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a0fe77ff735a4a6177da5395fb4bc2949_cgraph.svg" width="526" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="af96b29cb8410d557e8e452b81586223b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af96b29cb8410d557e8e452b81586223b">&#9670;&nbsp;</a></span>modify_vardesc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::modify_vardesc </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>vd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>longname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>hor_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>z_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>t_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>cmor_field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>cmor_units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>conversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This routine modifies the named elements of a vardesc type. All arguments are optional, except the vardesc type to be modified. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">vd</td><td>vardesc type that is modified</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>name of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">units</td><td>units of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">longname</td><td>long name of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hor_grid</td><td>horizonal staggering of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">z_grid</td><td>vertical staggering of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t_grid</td><td>time description: s, p, or 1</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmor_field_name</td><td>CMOR name</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmor_units</td><td>CMOR physical dimensions of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conversion</td><td>for unit conversions, such as needed to convert from intensive to extensive</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">caller</td><td>calling routine? </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00623">623</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__io_8F90_source.html#l00705">safe_string_copy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MOM__diag__to__Z_8F90_source.html#l01289">mom_diag_to_z::ocean_register_diag_with_z()</a>, and <a class="el" href="MOM__io_8F90_source.html#l00585">var_desc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  <span class="keywordtype">type</span>(vardesc),              <span class="keywordtype">intent(inout)</span> :: vd<span class="comment">                 !&lt; vardesc type that is modified</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: name<span class="comment">               !&lt; name of variable</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: units<span class="comment">              !&lt; units of variable</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: longname<span class="comment">           !&lt; long name of variable</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: hor_grid<span class="comment">           !&lt; horizonal staggering of variable</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: z_grid<span class="comment">             !&lt; vertical staggering of variable</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: t_grid<span class="comment">             !&lt; time description: s, p, or 1</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: cmor_field_name<span class="comment">    !&lt; CMOR name</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: cmor_units<span class="comment">         !&lt; CMOR physical dimensions of variable</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <span class="keywordtype">real</span>            , <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: conversion<span class="comment">         !&lt; for unit conversions, such as needed to</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">                                                                  !! convert from intensive to extensive</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: caller<span class="comment">             !&lt; calling routine?</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;  <span class="keywordtype">character(len=120)</span> :: cllr</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  cllr = <span class="stringliteral">&quot;mod_vardesc&quot;</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(caller)) cllr = trim(caller)</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(name))      <span class="keyword">call </span>safe_string_copy(name, vd%name, <span class="stringliteral">&quot;vd%name&quot;</span>, cllr)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(longname))  <span class="keyword">call </span>safe_string_copy(longname, vd%longname, &amp;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                               <span class="stringliteral">&quot;vd%longname of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(units))     <span class="keyword">call </span>safe_string_copy(units, vd%units,       &amp;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                               <span class="stringliteral">&quot;vd%units of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(hor_grid))  <span class="keyword">call </span>safe_string_copy(hor_grid, vd%hor_grid, &amp;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                               <span class="stringliteral">&quot;vd%hor_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(z_grid))    <span class="keyword">call </span>safe_string_copy(z_grid, vd%z_grid,     &amp;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                               <span class="stringliteral">&quot;vd%z_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(t_grid))    <span class="keyword">call </span>safe_string_copy(t_grid, vd%t_grid,     &amp;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                               <span class="stringliteral">&quot;vd%t_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(cmor_field_name))    <span class="keyword">call </span>safe_string_copy(cmor_field_name, vd%cmor_field_name,      &amp;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                                   <span class="stringliteral">&quot;vd%cmor_field_name of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(cmor_units))          <span class="keyword">call </span>safe_string_copy(cmor_units, vd%cmor_units,               &amp;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                                   <span class="stringliteral">&quot;vd%cmor_units of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_af96b29cb8410d557e8e452b81586223b_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_af96b29cb8410d557e8e452b81586223b_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="acbd53a6e8c4ff980d48a87cd0f795a5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbd53a6e8c4ff980d48a87cd0f795a5f">&#9670;&nbsp;</a></span>mom_file_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical function mom_io::mom_file_exists </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(mom_domain_type), intent(in)&#160;</td>
          <td class="paramname"><em>MOM_Domain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the named file or its domain-decomposed variant exists. </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00782">782</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  <span class="keywordtype">character(len=*)</span>,       <span class="keywordtype">intent(in)</span> :: file_name</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;  <span class="keywordtype">type</span>(mom_domain_type),  <span class="keywordtype">intent(in)</span> :: mom_domain</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">! This function uses the fms_io function file_exist to determine whether</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="comment">! a named file (or its decomposed variant) exists.</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;  <span class="keywordtype">logical</span> :: mom_file_exists</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;  mom_file_exists = file_exist(file_name, mom_domain%mpp_domain)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a80a3125a7c246310b5580f4b90ced8a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80a3125a7c246310b5580f4b90ced8a0">&#9670;&nbsp;</a></span>mom_io_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::mom_io_init </td>
          <td>(</td>
          <td class="paramtype">type(param_file_type), intent(in)&#160;</td>
          <td class="paramname"><em>param_file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the MOM_io module. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">param_file</td><td>structure indicating the open file to parse for model parameter values. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00840">840</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  <span class="keywordtype">type</span>(param_file_type), <span class="keywordtype">intent(in)</span> :: param_file<span class="comment">  !&lt; structure indicating the open file to</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">                                                   !! parse for model parameter values.</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">! This include declares and sets the variable &quot;version&quot;.</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="preprocessor">#include &quot;version_variable.h&quot;</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="preprocessor"></span>  <span class="keywordtype">character(len=40)</span>  :: mdl = <span class="stringliteral">&quot;MOM_io&quot;</span> <span class="comment">! This module&#39;s name.</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="keyword">call </span>log_version(param_file, mdl, version)</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a9fd87e3cf57a88e9c459679d4154af9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fd87e3cf57a88e9c459679d4154af9b">&#9670;&nbsp;</a></span>mom_read_data_1d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine mom_io::mom_read_data_1d </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>fieldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function uses the fms_io function read_data to read 1-D data field named "fieldname" from file "filename". </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00798">798</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  <span class="keywordtype">character(len=*)</span>,                 <span class="keywordtype">intent(in)</span>    :: filename, fieldname</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span>,               <span class="keywordtype">intent(inout)</span> :: data <span class="comment">! 1 dimensional data</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;  <span class="keyword">call </span>read_data(filename, fieldname, data)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a234ef0223f22bcc240e83bb89ba5c346"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234ef0223f22bcc240e83bb89ba5c346">&#9670;&nbsp;</a></span>mom_read_data_2d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine mom_io::mom_read_data_2d </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>fieldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:), intent(inout)&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(mom_domain_type), intent(in)&#160;</td>
          <td class="paramname"><em>MOM_Domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>timelevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function uses the fms_io function read_data to read a distributed 2-D data field named "fieldname" from file "filename". Valid values for "position" include CORNER, CENTER, EAST_FACE and NORTH_FACE. </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00811">811</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;  <span class="keywordtype">character(len=*)</span>,                 <span class="keywordtype">intent(in)</span>    :: filename, fieldname</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:)</span>,             <span class="keywordtype">intent(inout)</span> :: data <span class="comment">! 2 dimensional data</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  <span class="keywordtype">type</span>(mom_domain_type),            <span class="keywordtype">intent(in)</span>    :: mom_domain</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;  <span class="keywordtype">integer</span>,                <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: timelevel, position</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  <span class="keyword">call </span>read_data(filename, fieldname, <span class="keyword">data</span>, mom_domain%mpp_domain, &amp;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;                 timelevel=timelevel, position=position)</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a9488a6f3b4b48b10211399b313678f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9488a6f3b4b48b10211399b313678f49">&#9670;&nbsp;</a></span>mom_read_data_3d()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine mom_io::mom_read_data_3d </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>fieldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:,:,:), intent(inout)&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(mom_domain_type), intent(in)&#160;</td>
          <td class="paramname"><em>MOM_Domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>timelevel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>position</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function uses the fms_io function read_data to read a distributed 2-D data field named "fieldname" from file "filename". Valid values for "position" include CORNER, CENTER, EAST_FACE and NORTH_FACE. </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00827">827</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  <span class="keywordtype">character(len=*)</span>,                 <span class="keywordtype">intent(in)</span>    :: filename, fieldname</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:,:,:)</span>,           <span class="keywordtype">intent(inout)</span> :: data <span class="comment">! 2 dimensional data</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;  <span class="keywordtype">type</span>(mom_domain_type),            <span class="keywordtype">intent(in)</span>    :: mom_domain</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;  <span class="keywordtype">integer</span>,                <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>    :: timelevel, position</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  <span class="keyword">call </span>read_data(filename, fieldname, <span class="keyword">data</span>, mom_domain%mpp_domain, &amp;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                 timelevel=timelevel, position=position)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a79952045e028c6882f5b04ea5a1a83f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79952045e028c6882f5b04ea5a1a83f7">&#9670;&nbsp;</a></span>num_timelevels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public mom_io::num_timelevels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>varname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>min_dims</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function determines how many time levels a variable has. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>name of the file to read</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">varname</td><td>variable whose number of time levels are to be returned</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">min_dims</td><td>The minimum number of dimensions a variable must have if it has a time dimension. If the variable has 1 less dimension than this, then 0 is returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of time levels varname has in filename </dd></dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00463">463</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__string__functions_8F90_source.html#l00048">mom_string_functions::lowercase()</a>, and <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;  <span class="keywordtype">character(len=*)</span>,  <span class="keywordtype">intent(in)</span> :: filename<span class="comment">   !&lt; name of the file to read</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  <span class="keywordtype">character(len=*)</span>,  <span class="keywordtype">intent(in)</span> :: varname<span class="comment">    !&lt; variable whose number of time levels</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">                                              !! are to be returned</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: min_dims<span class="comment">   !&lt; The minimum number of dimensions a variable must have</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">                                              !! if it has a time dimension.  If the variable has 1 less</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">                                              !! dimension than this, then 0 is returned.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;  <span class="keywordtype">integer</span> :: n_time<span class="comment">                           !&lt; number of time levels varname has in filename</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;  <span class="keywordtype">logical</span> :: found</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  <span class="keywordtype">character(len=200)</span> :: msg</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordtype">character(len=nf90_max_name)</span> :: name</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  <span class="keywordtype">integer</span> :: ncid, nvars, status, varid, ndims, n</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">allocatable</span> :: varids(:)</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(nf90_max_var_dims)</span> :: dimids</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  n_time = -1</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  found = .false.</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;  status = nf90_open(filename, nf90_nowrite, ncid)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        <span class="stringliteral">&quot; Difficulties opening &quot;</span>//trim(filename)//<span class="stringliteral">&quot; - &quot;</span>//&amp;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        trim(nf90_strerror(status)))</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  status = nf90_inquire(ncid, nvariables=nvars)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <span class="stringliteral">&quot; Difficulties getting the number of variables in file &quot;</span>//&amp;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        trim(filename)//<span class="stringliteral">&quot; - &quot;</span>//trim(nf90_strerror(status)))</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="keywordflow">if</span> (nvars &lt; 1) <span class="keywordflow">then</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="stringliteral">&quot; There appear not to be any variables in &quot;</span>//trim(filename))</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keyword">allocate</span>(varids(nvars))</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  status = nf90_inq_varids(ncid, nvars, varids)</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="stringliteral">&quot; Difficulties getting the variable IDs in file &quot;</span>//&amp;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        trim(filename)//<span class="stringliteral">&quot; - &quot;</span>//trim(nf90_strerror(status)))</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keyword">deallocate</span>(varids) ; <span class="keywordflow">return</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  <span class="keywordflow">do</span> n = 1,nvars</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    status = nf90_inquire_variable(ncid, varids(n), name=name)</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          <span class="stringliteral">&quot; Difficulties getting a variable name in file &quot;</span>//&amp;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          trim(filename)//<span class="stringliteral">&quot; - &quot;</span>//trim(nf90_strerror(status)))</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> (trim(lowercase(name)) == trim(lowercase(varname))) <span class="keywordflow">then</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="keywordflow">if</span> (found) <span class="keywordflow">then</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          <span class="stringliteral">&quot; Two variables match the case-insensitive name &quot;</span>//trim(varname)//&amp;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;          <span class="stringliteral">&quot; in file &quot;</span>//trim(filename)//<span class="stringliteral">&quot; - &quot;</span>//trim(nf90_strerror(status)))</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        varid = varids(n) ; found = .true.</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordflow">      endif</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="keywordflow">  enddo</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;  <span class="keyword">deallocate</span>(varids)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;  <span class="keywordflow">if</span> (.not.found) <span class="keywordflow">then</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="stringliteral">&quot; variable &quot;</span>//trim(varname)//<span class="stringliteral">&quot; was not found in file &quot;</span>//&amp;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        trim(filename))</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  status = nf90_inquire_variable(ncid, varid, ndims = ndims)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      trim(nf90_strerror(status))//<span class="stringliteral">&quot; Getting number of dimensions of &quot;</span>//&amp;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      trim(varname)//<span class="stringliteral">&quot; in &quot;</span>//trim(filename))</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(min_dims)) <span class="keywordflow">then</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">if</span> (ndims &lt; min_dims-1) <span class="keywordflow">then</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keyword">write</span>(msg, <span class="stringliteral">&#39;(I3)&#39;</span>) min_dims</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keyword">call </span>mom_error(warning, <span class="stringliteral">&quot;num_timelevels: variable &quot;</span>//trim(varname)//&amp;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="stringliteral">&quot; in file &quot;</span>//trim(filename)//<span class="stringliteral">&quot; has fewer than min_dims = &quot;</span>//trim(msg)//&amp;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="stringliteral">&quot; dimensions.&quot;</span>)</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">elseif</span> (ndims == min_dims - 1) <span class="keywordflow">then</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      n_time = 0 ; <span class="keywordflow">return</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  status = nf90_inquire_variable(ncid, varid, dimids = dimids(1:ndims))</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keywordflow">then</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      trim(nf90_strerror(status))//<span class="stringliteral">&quot; Getting last dimension ID for &quot;</span>//&amp;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      trim(varname)//<span class="stringliteral">&quot; in &quot;</span>//trim(filename))</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">return</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  status = nf90_inquire_dimension(ncid, dimids(ndims), len=n_time)</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  <span class="keywordflow">if</span> (status /= nf90_noerr) <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;num_timelevels: &quot;</span>//&amp;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      trim(nf90_strerror(status))//<span class="stringliteral">&quot; Getting number of time levels of &quot;</span>//&amp;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      trim(varname)//<span class="stringliteral">&quot; in &quot;</span>//trim(filename))</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;  <span class="keywordflow">return</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a79952045e028c6882f5b04ea5a1a83f7_cgraph.svg" width="566" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="a23e82d1d89d9bb1c9bdf802ce80d4508"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23e82d1d89d9bb1c9bdf802ce80d4508">&#9670;&nbsp;</a></span>query_vardesc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::query_vardesc </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>), intent(in)&#160;</td>
          <td class="paramname"><em>vd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>longname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>hor_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>z_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>t_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>cmor_field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out), optional&#160;</td>
          <td class="paramname"><em>cmor_units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(out), optional&#160;</td>
          <td class="paramname"><em>conversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This routine queries vardesc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">vd</td><td>vardesc type that is queried</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">name</td><td>name of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">units</td><td>units of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">longname</td><td>long name of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">hor_grid</td><td>horiz staggering of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">z_grid</td><td>vert staggering of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">t_grid</td><td>time description: s, p, or 1</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cmor_field_name</td><td>CMOR name</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cmor_units</td><td>CMOR physical dimensions of variable</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">conversion</td><td>for unit conversions, such as needed to convert from intensive to extensive</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">caller</td><td>calling routine? </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00664">664</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__io_8F90_source.html#l00705">safe_string_copy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="advection__test__tracer_8F90_source.html#l00496">advection_test_tracer::advection_test_stock()</a>, <a class="el" href="boundary__impulse__tracer_8F90_source.html#l00395">boundary_impulse_tracer::boundary_impulse_stock()</a>, <a class="el" href="ideal__age__example_8F90_source.html#l00541">ideal_age_example::ideal_age_stock()</a>, <a class="el" href="advection__test__tracer_8F90_source.html#l00242">advection_test_tracer::initialize_advection_test_tracer()</a>, <a class="el" href="boundary__impulse__tracer_8F90_source.html#l00175">boundary_impulse_tracer::initialize_boundary_impulse_tracer()</a>, <a class="el" href="DOME__tracer_8F90_source.html#l00211">dome_tracer::initialize_dome_tracer()</a>, <a class="el" href="dye__example_8F90_source.html#l00274">regional_dyes::initialize_dye_tracer()</a>, <a class="el" href="ideal__age__example_8F90_source.html#l00283">ideal_age_example::initialize_ideal_age_tracer()</a>, <a class="el" href="ISOMIP__tracer_8F90_source.html#l00172">isomip_tracer::initialize_isomip_tracer()</a>, <a class="el" href="MOM__OCMIP2__CFC_8F90_source.html#l00374">mom_ocmip2_cfc::initialize_ocmip2_cfc()</a>, <a class="el" href="oil__tracer_8F90_source.html#l00279">oil_tracer::initialize_oil_tracer()</a>, <a class="el" href="pseudo__salt__tracer_8F90_source.html#l00203">pseudo_salt_tracer::initialize_pseudo_salt_tracer()</a>, <a class="el" href="MOM__diag__mediator_8F90_source.html#l01711">mom_diag_mediator::ocean_register_diag()</a>, <a class="el" href="MOM__diag__to__Z_8F90_source.html#l01289">mom_diag_to_z::ocean_register_diag_with_z()</a>, <a class="el" href="MOM__OCMIP2__CFC_8F90_source.html#l00674">mom_ocmip2_cfc::ocmip2_cfc_stock()</a>, <a class="el" href="pseudo__salt__tracer_8F90_source.html#l00422">pseudo_salt_tracer::pseudo_salt_stock()</a>, <a class="el" href="boundary__impulse__tracer_8F90_source.html#l00084">boundary_impulse_tracer::register_boundary_impulse_tracer()</a>, <a class="el" href="dye__example_8F90_source.html#l00129">regional_dyes::register_dye_tracer()</a>, <a class="el" href="ideal__age__example_8F90_source.html#l00145">ideal_age_example::register_ideal_age_tracer()</a>, <a class="el" href="oil__tracer_8F90_source.html#l00147">oil_tracer::register_oil_tracer()</a>, <a class="el" href="pseudo__salt__tracer_8F90_source.html#l00130">pseudo_salt_tracer::register_pseudo_salt_tracer()</a>, <a class="el" href="MOM__tracer__registry_8F90_source.html#l00081">mom_tracer_registry::register_tracer()</a>, <a class="el" href="MOM__diag__to__Z_8F90_source.html#l01354">mom_diag_to_z::register_z_diag()</a>, <a class="el" href="MOM__diag__to__Z_8F90_source.html#l01407">mom_diag_to_z::register_zint_diag()</a>, <a class="el" href="tracer__example_8F90_source.html#l00208">user_tracer_example::user_initialize_tracer()</a>, and <a class="el" href="tracer__example_8F90_source.html#l00520">user_tracer_example::user_tracer_stock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="keywordtype">type</span>(vardesc),              <span class="keywordtype">intent(in)</span>  :: vd<span class="comment">                 !&lt; vardesc type that is queried</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: name<span class="comment">               !&lt; name of variable</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: units<span class="comment">              !&lt; units of variable</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: longname<span class="comment">           !&lt; long name of variable</span></div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: hor_grid<span class="comment">           !&lt; horiz staggering of variable</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: z_grid<span class="comment">             !&lt; vert staggering of variable</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: t_grid<span class="comment">             !&lt; time description: s, p, or 1</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: cmor_field_name<span class="comment">    !&lt; CMOR name</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: cmor_units<span class="comment">         !&lt; CMOR physical dimensions of variable</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  <span class="keywordtype">real</span>            , <span class="keywordtype">optional</span>, <span class="keywordtype">intent(out)</span> :: conversion<span class="comment">         !&lt; for unit conversions, such as needed to</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">                                                                !! convert from intensive to extensive</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>  :: caller<span class="comment">             !&lt; calling routine?</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;  <span class="keywordtype">character(len=120)</span> :: cllr</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;  cllr = <span class="stringliteral">&quot;mod_vardesc&quot;</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(caller)) cllr = trim(caller)</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(name))      <span class="keyword">call </span>safe_string_copy(vd%name, name,         &amp;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                               <span class="stringliteral">&quot;vd%name of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(longname))  <span class="keyword">call </span>safe_string_copy(vd%longname, longname, &amp;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                               <span class="stringliteral">&quot;vd%longname of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(units))     <span class="keyword">call </span>safe_string_copy(vd%units, units,       &amp;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                               <span class="stringliteral">&quot;vd%units of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(hor_grid))  <span class="keyword">call </span>safe_string_copy(vd%hor_grid, hor_grid, &amp;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                               <span class="stringliteral">&quot;vd%hor_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(z_grid))    <span class="keyword">call </span>safe_string_copy(vd%z_grid, z_grid,     &amp;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                               <span class="stringliteral">&quot;vd%z_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(t_grid))    <span class="keyword">call </span>safe_string_copy(vd%t_grid, t_grid,     &amp;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                               <span class="stringliteral">&quot;vd%t_grid of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(cmor_field_name))    <span class="keyword">call </span>safe_string_copy(vd%cmor_field_name, cmor_field_name,       &amp;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                                   <span class="stringliteral">&quot;vd%cmor_field_name of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(cmor_units))          <span class="keyword">call </span>safe_string_copy(vd%cmor_units, cmor_units,                &amp;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                                   <span class="stringliteral">&quot;vd%cmor_units of &quot;</span>//trim(vd%name), cllr)</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a23e82d1d89d9bb1c9bdf802ce80d4508_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a23e82d1d89d9bb1c9bdf802ce80d4508_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a9cbd4826c272e6b7a35ad95894a977c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cbd4826c272e6b7a35ad95894a977c3">&#9670;&nbsp;</a></span>read_axis_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::read_axis_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>axis_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(out)&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00424">424</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordtype">character(len=*)</span>,   <span class="keywordtype">intent(in)</span>  :: filename, axis_name</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(out)</span> :: var</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;  <span class="keywordtype">integer</span> :: i,len,unit, ndim, nvar, natt, ntime</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  <span class="keywordtype">logical</span> :: axis_found</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordtype">type</span>(axistype), <span class="keywordtype">allocatable</span> :: axes(:)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="keywordtype">type</span>(axistype) :: time_axis</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="keywordtype">character(len=32)</span> :: name, units</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="keyword">call </span>open_file(unit, trim(filename), action=mpp_rdonly, form=mpp_netcdf, &amp;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                 threading=mpp_multi, fileset=single_file)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">!Find the number of variables (nvar) in this file</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keyword">call </span>mpp_get_info(unit, ndim, nvar, natt, ntime)</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">! -------------------------------------------------------------------</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">! Allocate space for the number of axes in the data file.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">! -------------------------------------------------------------------</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  <span class="keyword">allocate</span>(axes(ndim))</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  <span class="keyword">call </span>mpp_get_axes(unit, axes, time_axis)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  axis_found = .false.</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  <span class="keywordflow">do</span> i = 1, ndim</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keyword">call </span>mpp_get_atts(axes(i), name=name,len=len,units=units)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keywordflow">if</span> (name == axis_name) <span class="keywordflow">then</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      axis_found = .true.</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keyword">call </span>mpp_get_axis_data(axes(i),var)</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">exit</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="keywordflow">  enddo</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <span class="keywordflow">if</span> (.not.axis_found) <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;MOM_io read_axis_data: &quot;</span>//&amp;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="stringliteral">&quot;Unable to find axis &quot;</span>//trim(axis_name)//<span class="stringliteral">&quot; in file &quot;</span>//trim(filename))</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;  <span class="keyword">deallocate</span>(axes)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a9cbd4826c272e6b7a35ad95894a977c3_cgraph.svg" width="554" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>

</div>
</div>
<a id="ac15e7cf282a5b17192ffb7561537cb8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac15e7cf282a5b17192ffb7561537cb8c">&#9670;&nbsp;</a></span>reopen_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public mom_io::reopen_file </td>
          <td>(</td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>unit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>vars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>novars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(fieldtype), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>threading</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>timeunit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(ocean_grid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>G</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(dyn_horgrid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>dG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(verticalgrid_type), intent(in), optional&#160;</td>
          <td class="paramname"><em>GV</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This routine opens an existing NetCDF file for output. If it does not find the file, a new file is created. It also sets up structures that describe this file and the variables that will later be written to this file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">unit</td><td>unit id of an open file or -1 on a nonwriting PE with single file output</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>full path to the file to create</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vars</td><td>structures describing fields written to filename</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">novars</td><td>number of fields written to filename</td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">fields</td><td>array of fieldtypes for each variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">threading</td><td>SINGLE_FILE or MULTIPLE</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeunit</td><td>length, in seconds, of the units for time. The default value is 86400.0, for 1 day.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">g</td><td>ocean horizontal grid structure; G or dG is required if a new file uses any horizontal grid axes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dg</td><td>dynamic horizontal grid structure; G or dG is required if a new file uses any horizontal grid axes.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gv</td><td>ocean vertical grid structure, which is required if a new file uses any vertical grid axes. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00337">337</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__io_8F90_source.html#l00082">create_file()</a>, and <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="keywordtype">integer</span>,               <span class="keywordtype">intent(out)</span>   :: unit<span class="comment">       !&lt; unit id of an open file or -1 on a</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">                                                     !! nonwriting PE with single file output</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordtype">character(len=*)</span>,      <span class="keywordtype">intent(in)</span>    :: filename<span class="comment">   !&lt; full path to the file to create</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordtype">type</span>(vardesc),         <span class="keywordtype">intent(in)</span>    :: vars(:)<span class="comment">    !&lt; structures describing fields written to filename</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="keywordtype">integer</span>,               <span class="keywordtype">intent(in)</span>    :: novars<span class="comment">     !&lt; number of fields written to filename</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordtype">type</span>(fieldtype),       <span class="keywordtype">intent(inout)</span> :: fields(:)<span class="comment">  !&lt; array of fieldtypes for each variable</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>,     <span class="keywordtype">intent(in)</span>    :: threading<span class="comment">  !&lt; SINGLE_FILE or MULTIPLE</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  <span class="keywordtype">real</span>, <span class="keywordtype">optional</span>,        <span class="keywordtype">intent(in)</span>    :: timeunit<span class="comment">   !&lt; length, in seconds, of the units for time. The</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">                                                     !! default value is 86400.0, for 1 day.</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="keywordtype">type</span>(<a class="code" href="structmom__grid_1_1ocean__grid__type.html">ocean_grid_type</a>),   <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: g<span class="comment"> !&lt; ocean horizontal grid structure; G or dG</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">                                                     !! is required if a new file uses any</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">                                                     !! horizontal grid axes.</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="keywordtype">type</span>(dyn_horgrid_type),  <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: dg<span class="comment"> !&lt; dynamic horizontal grid structure; G or dG</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">                                                     !! is required if a new file uses any</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">                                                     !! horizontal grid axes.</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordtype">type</span>(verticalgrid_type), <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: gv<span class="comment"> !&lt; ocean vertical grid structure, which is</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">                                                     !! required if a new file uses any</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">                                                     !! vertical grid axes.</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordtype">type</span>(mom_domain_type), <span class="keywordtype">pointer</span> :: domain =&gt; null()</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  <span class="keywordtype">character(len=200)</span> :: check_name, mesg</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="keywordtype">integer</span> :: length, ndim, nvar, natt, ntime, thread</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">logical</span> :: exists, one_file, domain_set</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  thread = single_file</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">PRESENT</span>(threading)) thread = threading</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;  check_name = filename</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  length = len(trim(check_name))</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  <span class="keywordflow">if</span> (check_name(length-2:length) /= <span class="stringliteral">&quot;.nc&quot;</span>) check_name = trim(check_name)//<span class="stringliteral">&quot;.nc&quot;</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <span class="keywordflow">if</span> (thread /= single_file) check_name = trim(check_name)//<span class="stringliteral">&quot;.0000&quot;</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keyword">inquire</span>(file=check_name,exist=exists)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span> (.not.exists) <span class="keywordflow">then</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keyword">call </span>create_file(unit, filename, vars, novars, fields, threading, timeunit, &amp;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                     g=g, dg=dg, gv=gv)</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="keywordflow">else</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    domain_set = .false.</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(g)) <span class="keywordflow">then</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      domain_set = .true. ; domain =&gt; g%Domain</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">elseif</span> (<span class="keyword">present</span>(dg)) <span class="keywordflow">then</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      domain_set = .true. ; domain =&gt; dg%Domain</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    one_file = .true.</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (domain_set) <span class="keywordflow">then</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      one_file = ((thread == single_file) .or. .not.domain%use_io_layout)</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (one_file) <span class="keywordflow">then</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keyword">call </span>open_file(unit, filename, mpp_append, mpp_netcdf, threading=thread)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keyword">call </span>open_file(unit, filename, mpp_append, mpp_netcdf, domain=domain%mpp_domain)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (unit &lt; 0) <span class="keywordflow">return</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keyword">call </span>mpp_get_info(unit, ndim, nvar, natt, ntime)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (nvar == -1) <span class="keywordflow">then</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      <span class="keyword">write</span> (mesg,*) <span class="stringliteral">&quot;Reopening file &quot;</span>,trim(filename),<span class="stringliteral">&quot; apparently had &quot;</span>,nvar,&amp;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                     <span class="stringliteral">&quot; variables. Clobbering and creating file with &quot;</span>,novars,<span class="stringliteral">&quot; instead.&quot;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keyword">call </span>mom_error(warning,<span class="stringliteral">&quot;MOM_io: &quot;</span>//mesg)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <span class="keyword">call </span>create_file(unit, filename, vars, novars, fields, threading, timeunit, g=g, gv=gv)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">elseif</span> (nvar /= novars) <span class="keywordflow">then</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <span class="keyword">write</span> (mesg,*) <span class="stringliteral">&quot;Reopening file &quot;</span>,trim(filename),<span class="stringliteral">&quot; with &quot;</span>,novars,&amp;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                     <span class="stringliteral">&quot; variables instead of &quot;</span>,nvar,<span class="stringliteral">&quot;.&quot;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keyword">call </span>mom_error(fatal,<span class="stringliteral">&quot;MOM_io: &quot;</span>//mesg)</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (nvar&gt;0) <span class="keyword">call </span>mpp_get_fields(unit,fields(1:nvar))</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="comment">! Check the field names...</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">!    do i=1,nvar</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">!      call mpp_get_field_atts(fields(i),name)</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">!      !if (trim(name) /= trim(vars%name) then</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">!      !write (mesg,&#39;(&quot;Reopening file &quot;,a,&quot; variable &quot;,a,&quot; is called &quot;,a,&quot;.&quot;)&#39;,&amp;</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">!      !    filename,vars%name,name);</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">!      !call MOM_error(NOTE,&quot;MOM_io: &quot;//mesg)</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">!    enddo</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="ttc" id="structmom__grid_1_1ocean__grid__type_html"><div class="ttname"><a href="structmom__grid_1_1ocean__grid__type.html">mom_grid::ocean_grid_type</a></div><div class="ttdoc">Ocean grid type. See mom_grid for details. </div><div class="ttdef"><b>Definition:</b> <a href="MOM__grid_8F90_source.html#l00019">MOM_grid.F90:19</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_ac15e7cf282a5b17192ffb7561537cb8c_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="ac4bc408e8b38dbd669842753f26ebf88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4bc408e8b38dbd669842753f26ebf88">&#9670;&nbsp;</a></span>safe_string_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine mom_io::safe_string_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>str1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(out)&#160;</td>
          <td class="paramname"><em>str2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>fieldnm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copies a string. </p>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00705">705</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__error__handler_8F90_source.html#l00073">mom_error_handler::mom_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MOM__io_8F90_source.html#l00623">modify_vardesc()</a>, <a class="el" href="MOM__io_8F90_source.html#l00664">query_vardesc()</a>, and <a class="el" href="MOM__io_8F90_source.html#l00585">var_desc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;  <span class="keywordtype">character(len=*)</span>,           <span class="keywordtype">intent(in)</span>  :: str1</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  <span class="keywordtype">character(len=*)</span>,           <span class="keywordtype">intent(out)</span> :: str2</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span>  :: fieldnm, caller</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">if</span> (len(trim(str1)) &gt; len(str2)) <span class="keywordflow">then</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(fieldnm) .and. <span class="keyword">present</span>(caller)) <span class="keywordflow">then</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      <span class="keyword">call </span>mom_error(fatal, trim(caller)//<span class="stringliteral">&quot; attempted to copy the overly long&quot;</span>//&amp;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="stringliteral">&quot; string &quot;</span>//trim(str1)//<span class="stringliteral">&quot; into &quot;</span>//trim(fieldnm))</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keyword">call </span>mom_error(fatal, <span class="stringliteral">&quot;safe_string_copy: The string &quot;</span>//trim(str1)//&amp;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                     <span class="stringliteral">&quot; is longer than its intended target.&quot;</span>)</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="keywordflow">    endif</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="keywordflow">  endif</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  str2 = trim(str1)</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="namespacemom__io_ac4bc408e8b38dbd669842753f26ebf88_cgraph.svg" width="564" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_ac4bc408e8b38dbd669842753f26ebf88_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
<a id="a39c3ccc06bb1a6e446af2ee9010eba16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c3ccc06bb1a6e446af2ee9010eba16">&#9670;&nbsp;</a></span>var_desc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structmom__io_1_1vardesc.html">vardesc</a>) function, public mom_io::var_desc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>longname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>hor_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>z_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>t_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>cmor_field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>cmor_units</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, intent(in), optional&#160;</td>
          <td class="paramname"><em>conversion</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="version__variable_8h.html#acda997fe1761de4c6bca0f27dc786964">character</a>(len=*), intent(in), optional&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a vardesc type whose elements have been filled with the provided fields. The argument name is required, while the others are optional and have default values that are empty strings or are appropriate for a 3-d tracer field at the tracer cell centers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>variable name</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">units</td><td>variable units</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">longname</td><td>variable long name</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">hor_grid</td><td>variable horizonal staggering</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">z_grid</td><td>variable vertical staggering</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">t_grid</td><td>time description: s, p, or 1</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmor_field_name</td><td>CMOR name</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cmor_units</td><td>CMOR physical dimensions of variable</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">conversion</td><td>for unit conversions, such as needed to convert from intensive to extensive</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">caller</td><td>calling routine?</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>vardesc type that is created </dd></dl>

<p class="definition">Definition at line <a class="el" href="MOM__io_8F90_source.html#l00585">585</a> of file <a class="el" href="MOM__io_8F90_source.html">MOM_io.F90</a>.</p>

<p class="reference">References <a class="el" href="MOM__io_8F90_source.html#l00623">modify_vardesc()</a>, and <a class="el" href="MOM__io_8F90_source.html#l00705">safe_string_copy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="MOM__diabatic__driver_8F90_source.html#l01789">mom_diabatic_driver::diabatic_driver_init()</a>, <a class="el" href="MOM__MEKE_8F90_source.html#l01043">mom_meke::meke_alloc_register_restart()</a>, <a class="el" href="MOM__mixed__layer__restrat_8F90_source.html#l00893">mom_mixed_layer_restrat::mixedlayer_restrat_register_restarts()</a>, <a class="el" href="advection__test__tracer_8F90_source.html#l00135">advection_test_tracer::register_advection_test_tracer()</a>, <a class="el" href="MOM__barotropic_8F90_source.html#l04486">mom_barotropic::register_barotropic_restarts()</a>, <a class="el" href="boundary__impulse__tracer_8F90_source.html#l00084">boundary_impulse_tracer::register_boundary_impulse_tracer()</a>, <a class="el" href="MOM__controlled__forcing_8F90_source.html#l00417">mom_controlled_forcing::register_ctrl_forcing_restarts()</a>, <a class="el" href="DOME__tracer_8F90_source.html#l00127">dome_tracer::register_dome_tracer()</a>, <a class="el" href="dye__example_8F90_source.html#l00129">regional_dyes::register_dye_tracer()</a>, <a class="el" href="ideal__age__example_8F90_source.html#l00145">ideal_age_example::register_ideal_age_tracer()</a>, <a class="el" href="ISOMIP__tracer_8F90_source.html#l00094">isomip_tracer::register_isomip_tracer()</a>, <a class="el" href="MOM__OCMIP2__CFC_8F90_source.html#l00161">mom_ocmip2_cfc::register_ocmip2_cfc()</a>, <a class="el" href="oil__tracer_8F90_source.html#l00147">oil_tracer::register_oil_tracer()</a>, <a class="el" href="pseudo__salt__tracer_8F90_source.html#l00130">pseudo_salt_tracer::register_pseudo_salt_tracer()</a>, <a class="el" href="MOM__set__viscosity_8F90_source.html#l01743">mom_set_visc::set_visc_register_restarts()</a>, <a class="el" href="tracer__example_8F90_source.html#l00123">user_tracer_example::user_register_tracer_example()</a>, <a class="el" href="MOM__shared__initialization_8F90_source.html#l01069">mom_shared_initialization::write_ocean_geometry_file()</a>, and <a class="el" href="MOM__coord__initialization_8F90_source.html#l00528">mom_coord_initialization::write_vertgrid_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="keywordtype">character(len=*)</span>,           <span class="keywordtype">intent(in)</span> :: name<span class="comment">               !&lt; variable name</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: units<span class="comment">              !&lt; variable units</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: longname<span class="comment">           !&lt; variable long name</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: hor_grid<span class="comment">           !&lt; variable horizonal staggering</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: z_grid<span class="comment">             !&lt; variable vertical staggering</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: t_grid<span class="comment">             !&lt; time description: s, p, or 1</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: cmor_field_name<span class="comment">    !&lt; CMOR name</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: cmor_units<span class="comment">         !&lt; CMOR physical dimensions of variable</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  <span class="keywordtype">real</span>            , <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: conversion<span class="comment">         !&lt; for unit conversions, such as needed to</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">                                                               !! convert from intensive to extensive</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: caller<span class="comment">             !&lt; calling routine?</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  <span class="keywordtype">type</span>(vardesc)                          :: vd<span class="comment">                 !&lt; vardesc type that is created</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;  <span class="keywordtype">character(len=120)</span> :: cllr</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;  cllr = <span class="stringliteral">&quot;var_desc&quot;</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  <span class="keywordflow">if</span> (<span class="keyword">present</span>(caller)) cllr = trim(caller)</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  <span class="keyword">call </span>safe_string_copy(name, vd%name, <span class="stringliteral">&quot;vd%name&quot;</span>, cllr)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  vd%longname = <span class="stringliteral">&quot;&quot;</span> ; vd%units = <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  vd%hor_grid = <span class="stringliteral">&#39;h&#39;</span> ; vd%z_grid = <span class="stringliteral">&#39;L&#39;</span> ; vd%t_grid = <span class="stringliteral">&#39;s&#39;</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  vd%cmor_field_name  =  <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  vd%cmor_units       =  <span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  vd%conversion       =  1.0</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="keyword">call </span>modify_vardesc(vd, units=units, longname=longname, hor_grid=hor_grid, &amp;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                      z_grid=z_grid, t_grid=t_grid,                          &amp;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                      cmor_field_name=cmor_field_name,cmor_units=cmor_units, &amp;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                      conversion=conversion, caller=cllr)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a39c3ccc06bb1a6e446af2ee9010eba16_cgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="namespacemom__io_a39c3ccc06bb1a6e446af2ee9010eba16_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacemom__io.html">mom_io</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
